{% extends "base.html" %}
{% load static %}

{% block title %}- {{ blog_post.title }}{% endblock %}

{% block extra_css %}
{{ block.super }}
<link rel="stylesheet" href="{% static 'blog/css/blog.css' %}">
{% endblock %}

{% comment %} Product post detail {% endcomment %}
{% block content %}
<section class="container py-5 px-0 blog-section" id="blog-detail-section">
  {% if blog_post.featured_image %}
  <div class="w-100 blog-post__featured-image-container">
    <img src="{{ blog_post.featured_image.url }}" alt="{{ blog_post.title }}"
      class="w-100 img-fluid blog-post__featured-image">
  </div>
  {% endif %}
  <div class="container content-container">
    <div
      class="d-flex flex-column flex-lg-row align-items-start align-items-lg-center justify-content-lg-between title-container mt-4">
      <h1 class="h3 blog-post__titlemb-0 ">{{ blog_post.title }}</h1>
      <p class="mb-0 blog-post__date">{{ blog_post.created_on|date:"d/m/y" }}</p>
    </div>
    <p class="author-details"><strong>By {{ author_name }}</strong></p>
    {{ blog_post.content|safe }}
  </div>

  <div class="blog-comments mt-5">
    <h3 class="h4">Comments</h3>
    <div class="comments-container">
      <div class="comment-form-container">
        {% if user.is_authenticated %}
        <form action="{% url 'add_comment' blog_post.id %}" method="post">
          {% csrf_token %}
          <div class="form-group">
            <label for="content">Leave a comment</label>
            <textarea class="form-control" id="content" name="content" rows="3" required></textarea>
            <button type="submit" class="btn btn-primary mt-3 float-right">Add comment</button>
          </div>
        </form>
        {% else %}
        <p>You must <a href="{% url 'account_login' %}" class="text-underline text-secondary">log
            in</a> to leave a
          comment
        </p>
        {% endif %}
      </div>
      <div class="comments-list py-4">
        {% for comment in comments %}
        <div class="comment">
          <p class="comment-content">{{ comment.content }}</p>
          <p class="comment-author">By {{ comment.author }} on {{ comment.updated_on|date:"d/m/y" }}</p>
        </div>
        {% endfor %}
      </div>
    </div>
  </div>
</section>
{% endblock %}